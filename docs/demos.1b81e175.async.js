"use strict";(self.webpackChunk_rainetian_sandpack_file_explorer=self.webpackChunk_rainetian_sandpack_file_explorer||[]).push([[433],{70485:function(Z,p,e){e.r(p);var i=e(81869),m=e(26323),C=e(50959),c=e(11527),t=function(){return(0,c.jsx)("div",{children:(0,c.jsx)(i.oT,{template:"react-ts",children:(0,c.jsxs)(i.sp,{children:[(0,c.jsx)(m.Z,{style:{width:250}}),(0,c.jsx)(i._V,{showTabs:!0,closableTabs:!0}),(0,c.jsx)(i.Gj,{})]})})})};p.default=t},22766:function(Z,p,e){e.r(p);var i=e(81869),m=e(18145),C=e(26323),c=e(50959),t=e(11527),D=function(){var M=function($){var b={js:"https://img.icons8.com/color/48/000000/javascript.png",css:"https://img.icons8.com/color/48/000000/css3.png",html:"https://img.icons8.com/color/48/000000/html-5.png",json:"https://img.icons8.com/color/48/000000/json.png"},W=b[$];return W?(0,t.jsx)("img",{src:W}):null};return(0,t.jsx)("div",{children:(0,t.jsx)(i.oT,{template:"react",theme:m.pJ,children:(0,t.jsxs)(i.sp,{children:[(0,t.jsx)(C.Z,{fileIcon:M,style:{width:200}}),(0,t.jsx)(i._V,{showTabs:!0,closableTabs:!0}),(0,t.jsx)(i.Gj,{})]})})})};p.default=D},65742:function(Z,p,e){e.r(p);var i=e(81869),m=e(18145),C=e(26323),c=e(50959),t=e(11527),D=function(){return(0,t.jsx)("div",{children:(0,t.jsx)(i.oT,{template:"react",theme:m.uj,children:(0,t.jsxs)(i.sp,{children:[(0,t.jsx)(C.Z,{readOnly:!0,style:{width:200}}),(0,t.jsx)(i._V,{showTabs:!0,closableTabs:!0}),(0,t.jsx)(i.Gj,{})]})})})};p.default=D},26323:function(Z,p,e){e.d(p,{Z:function(){return le}});var i=e(15558),m=e.n(i),C=e(26068),c=e.n(C),t=e(48305),D=e.n(t),P=e(81869),M=e(61308),x=e(50959),$=e(335),b=e.n($);function W(I,E,h){var d=I,f=E.split("/").filter(function(u){return u.trim()!==""});return f.forEach(function(u,j){if(f.length===1){d=I.filter(function(l){return l.parent===0&&l.text===u&&l.droppable===h});return}if(j!==f.length-1){var s=d.find(function(l){return l.text===u&&l.droppable});d=I.filter(function(l){return l.parent===(s==null?void 0:s.id)})}else d=d.filter(function(l){return l.text===u&&l.droppable===h})}),d[0]}function A(I,E){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(!E)return"";for(var d="",f=E.toString();f!==h.toString();){var u=!1,j=b()(I),s;try{for(j.s();!(s=j.n()).done;){var l=s.value;if(l.id.toString()===f){var O;d="/"+l.text+d,f=(O=l.parent)===null||O===void 0?void 0:O.toString(),u=!0;break}}}catch(R){j.e(R)}finally{j.f()}if(!u)return""}return d===""?"":d}var o=e(11527),re=function(E){var h,d=E.style,f=E.readOnly,u=E.fileIcon,j=(0,P.X3)(),s=j.sandpack,l=s.files,O=s.activeFile,R=s.openFile,K=s.deleteFile,L=s.addFile,k=s.closeFile,T=(0,x.useRef)(null),te=x.useState(),Q=D()(te,2),Y=Q[0],ae=Q[1],G=(0,x.useMemo)(function(){return M.Me.files2tree(l)},[l]),ie=x.useState(G),w=D()(ie,2),g=w[0],V=w[1],oe=function(n,v){var F=v.action,U=v.oldTree,r=v.oldNode,N=v.newNode,_="",y="";r&&(_=A(U,r.id),y=A(n,r.id));var q=function(X){var se=X.filter(function(B){return B.droppable});se.forEach(function(B){var z;if(((z=B.content)===null||z===void 0?void 0:z.code)==="//#folder#//"){var ce=X.find(function(fe){return fe.parent===B.id});if(ce){var ne=A(X,B.id);k(ne),K(ne)}}})};if(F==="remove")K(_);else if(F==="drop"){var H;L(y,(r==null||(H=r.content)===null||H===void 0?void 0:H.code)||""),K(_);var de=n.find(function(S){return S.parent===(r==null?void 0:r.parent)});de?U.forEach(function(S){S.parent===(r==null?void 0:r.id)&&k(A(U,S.id))}):L(A(U,(r==null?void 0:r.parent)||""),"//#folder#//"),q(n),r!=null&&r.droppable||R(y)}else if(F==="create"){if(!N)return;var ee=A(n,N.id);L(ee,N.droppable?"//#folder#//":""),q(n),N.droppable||R(ee)}else if(F==="update"){var J;L(y,(r==null||(J=r.content)===null||J===void 0?void 0:J.code)||""),k(_),K(_),r!=null&&r.droppable||R(y)}console.log(n),setTimeout(function(){V(n)},20)};return(0,x.useEffect)(function(){var a,n=W(g,O,!1);n!=null&&n.parent&&((a=T.current)===null||a===void 0||a.open(n.parent)),ae(n==null?void 0:n.id)},[O,g]),(0,x.useEffect)(function(){var a,n=((a=l[O])===null||a===void 0?void 0:a.code)||"",v=g.find(function(F){return F.id===Y});v&&(v.content=c()(c()({},v.content),{},{code:n})),V(m()(g))},[(h=l[O])===null||h===void 0?void 0:h.code]),(0,x.useEffect)(function(){V(G)},[G]),(0,o.jsxs)("div",{className:"sandpack-file-explorer",style:d,children:[(0,o.jsxs)("div",{className:"sandpack-file-explorer__header",children:[(0,o.jsx)("span",{children:"Files"}),f?null:(0,o.jsxs)("span",{className:"sandpack-file-explorer__header__actions",children:[(0,o.jsx)("span",{onClick:function(){var n;return(n=T.current)===null||n===void 0?void 0:n.addFile()},title:"Add file",children:(0,o.jsx)(M.Sp,{})}),(0,o.jsx)("span",{onClick:function(){var n;return(n=T.current)===null||n===void 0?void 0:n.addFolder()},title:"Add folder",children:(0,o.jsx)(M.De,{})}),(0,o.jsx)("span",{onClick:function(){var n;return(n=T.current)===null||n===void 0?void 0:n.closeAll()},title:"Collapse all",children:(0,o.jsx)(M.W5,{})})]})]}),(0,o.jsx)(M.ZP,{fileExplorerRef:T,data:g,rootId:0,initialOpen:!0,fileIcon:u||function(a){return a==="file"?(0,o.jsx)(P.aA,{}):a==="folder"?(0,o.jsx)(P.f8,{}):a==="folderOpen"?(0,o.jsx)(P.N9,{}):(0,o.jsx)(P.aA,{})},selectedId:Y,onSelect:function(n){if(!n.droppable){var v=A(g,n.id);v&&R(v)}},onChange:oe,showActions:!f,canDrag:function(){return!f},allowRepeatText:!1})]})},le=re}}]);
